<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ä½ å¥½å•Šæˆ‘æ˜¯ç”·åŒ</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#ffb86b;--muted:#94a3b8;--win:#34d399;--lose:#fb7185;font-family:Inter,system-ui,Arial}
    html,body{height:100%;margin:0;padding:12px;background:linear-gradient(180deg,var(--bg),#071025);color:#e6eef8;display:flex;align-items:center;justify-content:center}
    .card{width:100%;max-width:760px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:14px;border:1px solid rgba(255,255,255,0.03);position:relative}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    h1{font-size:18px;margin:0}
    .game-area{display:flex;flex-direction:column;gap:12px}
    .board{padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
    .cell{background:#0c1220;border-radius:8px;padding:6px;display:flex;align-items:center;justify-content:center;min-height:100px;cursor:pointer;pointer-events:auto !important;position:relative;z-index:10}
    .cell img{max-width:100%;max-height:100%;object-fit:contain;border-radius:6px}
    .sidebar{display:flex;flex-direction:row;gap:10px;width:100%}
    .stat{flex:1;background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;text-align:center}
    .stat-label{font-size:12px;color:var(--muted)}
    .stat-value{font-size:18px;font-weight:700}
    .controls{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
    .btn{background:var(--accent);border:none;padding:10px 16px;border-radius:8px;font-weight:700;cursor:pointer;pointer-events:auto !important;position:relative;z-index:10;font-size:14px}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--accent)}
    .btn#btnEndGame{display:none}/* åˆå§‹éšè—ç»“æŸæ¸¸æˆæŒ‰é’® */
    .btn#btnAchievementWall{position:absolute;top:14px;right:14px;padding:6px 10px;font-size:12px;background:transparent;border:1px solid rgba(255,184,107,0.3);color:var(--accent);z-index:20}
    .btn#btnResetAchieve{position:absolute;bottom:14px;left:14px;padding:6px 10px;font-size:12px;background:var(--lose);color:white;z-index:20}
    .message{padding:8px;border-radius:8px;text-align:center;margin:8px 0;display:none;font-size:14px}
    .message.win{color:var(--win);display:block}
    .message.lose{color:var(--lose);display:block}
    .message.limit{color:var(--accent);font-size:16px;font-weight:700;animation:pulse 0.5s ease-in-out infinite alternate;background:rgba(255,184,107,0.1);border:1px solid rgba(255,184,107,0.3);display:block}
    @keyframes pulse{from{transform:scale(1);opacity:0.9}to{transform:scale(1.05);opacity:1}}
    /* é€šç”¨å¼¹çª—æ ·å¼ï¼ˆæ‰‹æœºç«¯é€‚é…ï¼‰ */
    .popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--card);border-radius:12px;padding:24px;border:2px solid var(--accent);z-index:1000;animation:popup 0.3s ease-in-out;display:none;width:85%;max-width:350px;text-align:center}
    .popup.show{display:block}
    @keyframes popup{0%{opacity:0;transform:translate(-50%,-60%) scale(0.9)}100%{opacity:1;transform:translate(-50%,-50%) scale(1)}}
    /* åˆ†æ•°é‡Œç¨‹ç¢‘å¼¹çª— */
    .score-popup .popup-icon{font-size:32px;margin-bottom:12px;color:var(--accent)}
    .score-popup h3{font-size:20px;margin:0 0 8px;color:var(--accent)}
    .score-popup p{font-size:14px;margin:0 0 16px;color:var(--muted)}
    /* æˆå°±è§£é”å¼¹çª— */
    .achievement-popup{padding:20px}
    .achievement-popup .popup-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
    .achievement-popup .achievement-icon{width:48px;height:48px;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;font-size:24px;color:#071025}
    .achievement-popup .achievement-info{text-align:left}
    .achievement-popup h3{font-size:18px;margin:0 0 4px;color:var(--win)}
    .achievement-popup p{font-size:12px;margin:0;color:var(--muted)}
    .achievement-popup .popup-body{font-size:14px;margin-bottom:16px;padding:8px;border-radius:8px;background:rgba(255,255,255,0.01)}
    /* ç»“æŸæ¸¸æˆç¡®è®¤å¼¹çª— */
    .confirm-popup h3{font-size:18px;margin:0 0 16px;color:var(--accent)}
    .confirm-popup .popup-buttons{display:flex;gap:10px}
    .confirm-popup .btn{flex:1;padding:10px}
    /* ç»“æŸæ¸¸æˆç»Ÿè®¡å¼¹çª— */
    .stats-popup .stats-list{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}
    .stats-popup .stat-item{display:flex;justify-content:space-between;padding:8px;background:rgba(255,255,255,0.01);border-radius:6px}
    .stats-popup .stat-label{font-size:14px;color:var(--muted)}
    .stats-popup .stat-value{font-size:14px;font-weight:700;color:var(--accent)}
    /* é‡ç½®æˆå°±ç¡®è®¤å¼¹çª— */
    .reset-achieve-popup .popup-text{font-size:14px;margin:0 0 16px;color:var(--muted);line-height:1.5}
    /* é®ç½©å±‚ */
    .overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:999;display:none}
    .overlay.show{display:block}
    /* æˆå°±å¢™æ ·å¼ï¼ˆæ‰‹æœºç«¯é€‚é…ï¼‰ */
    .achievement-wall{position:fixed;top:0;left:0;width:100%;height:100%;background:var(--bg);z-index:2000;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:20px;overflow-y:auto}
    .achievement-wall.hidden{display:none}
    .achievement-wall-header{display:flex;align-items:center;justify-content:space-between;width:100%;max-width:760px;margin-bottom:20px}
    .achievement-wall-title{font-size:22px;color:var(--accent);margin:0}
    .achievement-list{width:100%;max-width:760px;display:flex;flex-direction:column;gap:12px}
    .achievement-item{background:var(--card);border-radius:10px;padding:16px;border:1px solid rgba(255,255,255,0.03);display:flex;align-items:center;gap:16px}
    .achievement-item.locked{opacity:0.5}
    .achievement-item.hidden{display:none !important}/* éšè—æˆå°±ä¸æ˜¾ç¤º */
    .achievement-item-icon{width:44px;height:44px;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;font-size:20px;color:#071025}
    .achievement-item.locked .achievement-item-icon{background:var(--muted);color:var(--card)}
    .achievement-item-info{flex:1}
    .achievement-item-name{font-size:16px;margin:0 0 4px;color:var(--win)}
    .achievement-item-desc{font-size:13px;margin:0 0 6px;color:var(--muted)}
    /* éšè—è·å¾—æ–¹æ³• */
    .achievement-item-method{display:none}
    .achievement-wall-close{position:absolute;top:20px;right:20px;background:var(--lose);color:white;border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:18px;z-index:2001}
    /* å¹¿å‘ŠåŒºåŸŸ */
    footer.ad{margin-top:12px;padding:12px;border-radius:10px;display:flex;justify-content:space-between;align-items:center;position:relative}
    .ad-close-btn{position:absolute;top:6px;right:6px;background:var(--lose);color:white;border:none;border-radius:50%;width:28px;height:28px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:16px;z-index:10;pointer-events:auto !important}
    .cta{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:10px;background:var(--accent);color:#071025;font-weight:700;text-decoration:none;pointer-events:auto !important;font-size:14px}
    .flash{animation:flash 1s linear infinite}
    @keyframes flash{0%,100%{opacity:1}50%{opacity:0.25}}
    /* æ¨¡æ€æ¡†æ ·å¼ï¼ˆæ‰‹æœºç«¯é€‚é…ï¼‰ */
    .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:1000;align-items:center;justify-content:center}
    .modal.show{display:flex}
    .modal-content{background:var(--card);padding:24px;border-radius:12px;width:85%;max-width:400px;border:1px solid rgba(255,255,255,0.05)}
    .modal-title{font-size:18px;margin:0 0 16px;color:var(--accent);text-align:center}
    .modal-buttons{display:flex;flex-direction:column;gap:10px}
    .modal-btn{padding:12px 16px;border-radius:8px;border:none;font-weight:700;cursor:pointer;text-align:center;pointer-events:auto !important;position:relative;z-index:1001;font-size:14px}
    .modal-btn.option1{background:var(--win);color:#071025}
    .modal-btn.option2{background:var(--lose);color:white}
    .modal-btn.option3{background:var(--accent);color:#071025}
  </style>
</head>
<body>
  <div class="card">
    <header>
      <h1>ä½ å¥½å•Šæˆ‘æ˜¯ç”·åŒ</h1>
      <div style="font-size:12px;color:var(--muted)">ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"æŒ‘æˆ˜</div>
    </header>

    <div class="game-area">
      <div class="board">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <div style="font-size:13px;color:var(--muted)">å…³å¡ï¼š<span id="round">â€”</span></div>
          <div id="questionText" style="font-size:13px;color:var(--muted)">é¢˜ç›®å°†éšæœºå‡ºç°</div>
        </div>

        <div id="grid" class="grid"></div>
        <div id="message" class="message"></div>
        <div class="controls">
          <button id="btnStart" class="btn">å¼€å§‹â™‚æ¸¸æˆ</button>
          <button id="btnRestart" class="btn secondary">é‡ç½®</button>
          <button id="btnEndGame" class="btn secondary">ç»“æŸæ¸¸æˆ</button>
        </div>
      </div>

      <div class="sidebar">
        <div class="stat">
          <div class="stat-label">å€’è®¡æ—¶</div>
          <div id="timer" class="stat-value">--</div>
        </div>
        <div class="stat">
          <div class="stat-label">åˆ†æ•°</div>
          <div id="score" class="stat-value">0</div>
        </div>
      </div>
    </div>

    <!-- å¹¿å‘ŠåŒºåŸŸ -->
    <footer class="ad">
      <button id="adCloseBtn" class="ad-close-btn">Ã—</button>
      <div style="font-size:13px;color:var(--muted)">å¹¿å‘ŠåŒº</div>
      <a class="cta flash" href="https://ä½ çš„æ¨å¹¿é“¾æ¥.com">ç‚¹å‡»â™‚è¿™é‡Œ</a>
    </footer>

    <!-- æˆå°±å¢™å…¥å£ï¼ˆä»…åˆå§‹ç•Œé¢æ˜¾ç¤ºï¼‰ -->
    <button id="btnAchievementWall" class="btn">æˆå°±å¢™</button>
    <button id="btnResetAchieve" class="btn">æˆâ™‚å°±é‡å¼€</button>
  </div>

  <!-- å¼¹çª—ç›¸å…³ -->
  <div class="overlay" id="overlay"></div>
  <!-- åˆ†æ•°é‡Œç¨‹ç¢‘å¼¹çª—ï¼ˆ50åˆ†/100åˆ†ï¼‰ -->
  <div class="popup score-popup" id="scorePopup">
    <div class="popup-icon" id="scorePopupIcon">ğŸ‰</div>
    <h3 id="scorePopupTitle">å¤ªæ£’äº†ï¼</h3>
    <p id="scorePopupDesc">ä½ å·²ç»è·å¾—äº†50åˆ†ï¼</p>
    <button class="btn" id="scorePopupBtn">ç»§ç»­æŒ‘æˆ˜</button>
  </div>
  <!-- æˆå°±è§£é”å¼¹çª— -->
  <div class="popup achievement-popup" id="achievementPopup">
    <div class="popup-header">
      <div class="achievement-icon">ğŸ†</div>
      <div class="achievement-info">
        <h3 id="achievementName">æˆå°±è§£é”ï¼</h3>
        <p id="achievementDesc">å®Œæˆäº†æŸä¸ªæˆå°±</p>
      </div>
    </div>
    <div class="popup-body" id="achievementMsg">
      æ­å–œä½ è§£é”äº†æ–°æˆå°±ï¼
    </div>
    <button class="btn" id="achievementPopupBtn">å¤ªæ£’äº†</button>
  </div>
  <!-- ç»“æŸæ¸¸æˆç¡®è®¤å¼¹çª— -->
  <div class="popup confirm-popup" id="endGameConfirmPopup">
    <h3>æ˜¯å¦ç»“æŸæ¸¸æˆï¼Ÿ</h3>
    <div class="popup-buttons">
      <button class="btn" id="btnConfirmEnd">æ˜¯</button>
      <button class="btn secondary" id="btnCancelEnd">å¦</button>
    </div>
  </div>
  <!-- ç»“æŸæ¸¸æˆç»Ÿè®¡å¼¹çª— -->
  <div class="popup stats-popup" id="endGameStatsPopup">
    <h3>æ¸¸æˆç»Ÿè®¡</h3>
    <div class="stats-list">
      <div class="stat-item">
        <span class="stat-label">æœ€ç»ˆåˆ†æ•°ï¼š</span>
        <span class="stat-value" id="statsScore">0</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">æ€»å…³å¡æ•°ï¼š</span>
        <span class="stat-value" id="statsRound">0</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">æ­£ç¡®æ¬¡æ•°ï¼š</span>
        <span class="stat-value" id="statsCorrect">0</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">é”™è¯¯æ¬¡æ•°ï¼š</span>
        <span class="stat-value" id="statsWrong">0</span>
      </div>
    </div>
    <button class="btn" id="statsPopupBtn">è¿”å›ä¸»é¡µ</button>
  </div>
  <!-- é‡ç½®æˆå°±ç¡®è®¤å¼¹çª— -->
  <div class="popup confirm-popup reset-achieve-popup" id="resetAchieveConfirmPopup">
    <h3>æˆâ™‚å°±é‡å¼€</h3>
    <p class="popup-text">hwjæ¸©é¦¨æç¤ºï¼šæ˜¯å¦è¦é‡ç½®æˆå°±ï¼ˆåæ­£æˆ‘ä¹Ÿæ²¡æ·»åŠ æ›´å¤šï¼‰</p>
    <div class="popup-buttons">
      <button class="btn" id="btnConfirmReset">æ˜¯</button>
      <button class="btn secondary" id="btnYeahReset">yeahâ™‚</button>
    </div>
  </div>

  <!-- æˆå°±å¢™é¡µé¢ -->
  <div class="achievement-wall hidden" id="achievementWall">
    <button class="achievement-wall-close" id="achievementWallClose">Ã—</button>
    <div class="achievement-wall-header">
      <h2 class="achievement-wall-title">æˆå°±å¢™</h2>
    </div>
    <div class="achievement-list" id="achievementList">
      <!-- æˆå°±é¡¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
    </div>
  </div>

  <!-- å¹¿å‘Šå…³é—­ç¡®è®¤æ¨¡æ€æ¡† -->
  <div id="adCloseModal" class="modal">
    <div class="modal-content">
      <h3 class="modal-title">ä¸è¿›æ¥çœ‹çœ‹å—ï¼Ÿ</h3>
      <div class="modal-buttons">
        <button id="btnAdOption1" class="modal-btn option1">å¥½å§ï¼Œæ¥äº†â¤ï¸</button>
        <button id="btnAdOption2" class="modal-btn option2">å‘ƒâ†“ï¼Œæˆ‘æ˜¯ç›´ç”·ã€‚</button>
        <button id="btnAdOption3" class="modal-btn option3">ä½ ä¸çœ‹çœ‹æˆ‘å—ï¼Ÿ</button>
      </div>
    </div>
  </div>

  <script>
    window.onload = function() {
      const CONFIG = {
        images: ["img1.jpg", "img2.jpg", "img3.jpg", "img4.jpg"],
        adLink: "https://ä½ çš„æ¨å¹¿é“¾æ¥.com",
        timeLimit: 8,
        maxScore: 100,
        pointsPerCorrect: 5,
      };

      // é¢˜ç›®é…ç½®
      const QUESTIONS = [
        {
          id:1,
          text: 'æ‰¾å‡ºé‡Œé¢æ‰€æœ‰ç”·åŒ',
          type:'special',
          onSelect: () => ({ ok: false, msg: 'å“ˆå“ˆéª—ä½ çš„ï¼Œæˆ‘åªè®¾ç½®äº†å•é€‰' })
        },
        {
          id:2,
          text: 'æ‰¾å‡ºçœŸæ­£çš„å¨å¸ˆ',
          type:'single',
          correctIdx: 0,
          onCorrect: 'ä½ çœ‹èµ·æ¥å¾ˆå¥½åƒ',
          onWrong: 'Cazzoï¼Œä½ ä¸è®¤è¯†æˆ‘å—',
          achievement: 'chef' // å…³è”æˆå°±ï¼šå¨å¸ˆ
        },
        {
          id:3,
          text: 'æ‰¾å‡ºå¤±å»äº†çƒæ£çš„å¿ƒç†æ²»ç–—å¸ˆ',
          type:'single',
          correctIdx: 3,
          onCorrect: 'éš”å£ä»–ç”·äººåœ¨åŒæŒing',
          onWrong: 'å†é€‰é”™å°±è¿‡æ¥å¿ƒç†æ²»ç–—',
          achievement: 'therapist' // å…³è”æˆå°±ï¼šå¿ƒç†æ²»ç–—å¸ˆ
        },
        {
          id:4,
          text: 'æ‰¾å‡ºå›¾ä¸­çš„ç›´ç”·',
          type:'multi-text',
          onSelect: (idx) => {
            if(idx === 0 || idx === 1) {
              unlockAchievement('straight'); // è§£é”æˆå°±ï¼šç›´ç”·
              return { ok: true, msg: 'ğŸ’æˆ‘ä»¬æ˜¯çœŸæ­£çš„â™‚ç›´ç”·â™‚å‘€' };
            } else {
              unlockAchievement('gayPride'); // è§£é”æˆå°±ï¼šéª„å‚²ä¹‹GAY
              return { ok: true, msg: 'ğŸŒˆğŸŒˆğŸŒˆéª„å‚²ä¹‹â™‚GAYğŸŒˆğŸŒˆğŸŒˆ' };
            }
          }
        }
      ];

      // æˆå°±é…ç½®ï¼ˆéšè—è·å¾—æ–¹æ³•ï¼Œæ–°å¢3ä¸ªæˆå°±ï¼‰
      const ACHIEVEMENTS = {
        straight: {
          icon: 'ğŸ’',
          name: 'æˆ‘æ˜¯ç›´ç”·',
          desc: 'å‹‡æ•¢æ‰¿è®¤è‡ªå·±çš„èº«ä»½',
          method: 'é€‰æ‹©"æ‰¾å‡ºå›¾ä¸­çš„ç›´ç”·"é¢˜ç›®ä¸­çš„ç›´ç”·é€‰é¡¹', // éšè—
          msg: 'ğŸ’ ä½ é€‰æ‹©äº†ç›´ç”·é€‰é¡¹ï¼Œæœç„¶æ˜¯çº¯çº¯çš„â™‚ç›´ç”·ï¼'
        },
        gayPride: {
          icon: 'ğŸŒˆ',
          name: 'éª„å‚²ä¹‹GAY',
          desc: 'ä¸ºè‡ªå·±çš„èº«ä»½æ„Ÿåˆ°éª„å‚²',
          method: 'é€‰æ‹©"æ‰¾å‡ºå›¾ä¸­çš„ç›´ç”·"é¢˜ç›®ä¸­çš„GAYé€‰é¡¹', // éšè—
          msg: 'ğŸŒˆ éª„å‚²çš„GAYï¼ä¸ºä½ æ„Ÿåˆ°è‡ªè±ªï¼'
        },
        chef: {
          icon: 'ğŸ‘¨â€ğŸ³',
          name: 'ä½ æ˜¯é£Ÿæå—',
          desc: 'æ‰¾åˆ°çœŸæ­£çš„å¨å¸ˆ',
          method: 'æ­£ç¡®å›ç­”"æ‰¾å‡ºçœŸæ­£çš„å¨å¸ˆ"é¢˜ç›®', // éšè—
          msg: 'ğŸ‘¨â€ğŸ³ ä½ æ‰¾å‡ºäº†çœŸæ­£çš„å¨å¸ˆï¼Œå°å¿ƒè¢«åšæˆç¾é£Ÿå“¦ï¼'
        },
        therapist: {
          icon: 'ğŸ§ ',
          name: 'å¿ƒç†æ²»ç–—å¸ˆ',
          desc: 'æ‰¾åˆ°å¤±å»çƒæ£çš„å¿ƒç†æ²»ç–—å¸ˆ',
          method: 'æ­£ç¡®å›ç­”"æ‰¾å‡ºå¤±å»äº†çƒæ£çš„å¿ƒç†æ²»ç–—å¸ˆ"é¢˜ç›®', // éšè—
          msg: 'ğŸ§  æ‰¾åˆ°å¿ƒç†æ²»ç–—å¸ˆäº†ï¼éœ€è¦èŠèŠä½ çš„æ„Ÿæƒ…é—®é¢˜å—ï¼Ÿ'
        },
        maxScore: {
          icon: 'ğŸ†',
          name: 'å¤©é€‰ç”·åŒğŸŒˆ',
          desc: 'è¾¾åˆ°æ»¡åˆ†100åˆ†',
          method: 'åœ¨æ¸¸æˆä¸­è·å¾—100åˆ†', // éšè—
          msg: 'ğŸ† æ»¡åˆ†ï¼ä½ å°±æ˜¯å¤©é€‰ä¹‹å­ï¼Œç”·åŒä¹‹ç¥ï¼'
        },
        // æ–°å¢æˆå°±ï¼šå¥½åƒå¿˜äº†è°...ï¼ˆè¿ç»­4æ¬¡ä¸é€‰img3.jpgï¼‰
        forgotWho: {
          icon: 'â“',
          name: 'å¥½åƒå¿˜äº†è°...',
          desc: 'æ€»è§‰å¾—æ¼æ‰äº†ä»€ä¹ˆé‡è¦çš„äºº',
          method: 'è¿ç»­4æ¬¡ä¸é€‰æ‹©img3.jpgå›¾ç‰‡', // éšè—
          msg: 'â“ è¿ç»­4æ¬¡æ²¡é€‰img3.jpgï¼Œä½ æ˜¯ä¸æ˜¯å¿˜äº†è°ï¼Ÿ'
        },
        // æ–°å¢æˆå°±ï¼šå¼ºäººæ‰€éš¾â™‚ï¼ˆè¿ç»­4æ¬¡é€‰img1.jpgï¼‰
        forceful: {
          icon: 'ğŸ”„',
          name: 'å¼ºäººæ‰€éš¾â™‚',
          desc: 'å¯¹æŸä¸ªé€‰é¡¹æœ‰ç€æ‰§ç€çš„åçˆ±',
          method: 'è¿ç»­4æ¬¡é€‰æ‹©img1.jpgå›¾ç‰‡', // éšè—
          msg: 'ğŸ”„ è¿ç»­4æ¬¡é€‰img1.jpgï¼Œä½ è¿™æ˜¯å¼ºäººæ‰€éš¾å•Šï¼'
        },
        // æ–°å¢éšè—æˆå°±ï¼šOMGâ™‚ï¼ˆé‡ç½®æˆå°±é€‰yeahâ™‚ï¼‰
        omg: {
          icon: 'ğŸ˜±',
          name: 'OMGâ™‚',
          desc: 'ä½ å‘ç°äº†éšè—çš„ç§˜å¯†ï¼',
          method: 'é‡ç½®æˆå°±æ—¶é€‰æ‹©"yeahâ™‚"é€‰é¡¹', // éšè—
          msg: 'ğŸ˜± OMGï¼ä½ å±…ç„¶å‘ç°äº†éšè—æˆå°±ï¼',
          hidden: true // ä¸æ˜¾ç¤ºåœ¨æˆå°±å¢™
        }
      };

      // DOMå…ƒç´ è·å–
      const gridEl = document.getElementById('grid');
      const timerEl = document.getElementById('timer');
      const scoreEl = document.getElementById('score');
      const messageEl = document.getElementById('message');
      const questionTextEl = document.getElementById('questionText');
      const roundEl = document.getElementById('round');
      const btnStart = document.getElementById('btnStart');
      const btnRestart = document.getElementById('btnRestart');
      const btnEndGame = document.getElementById('btnEndGame');
      const adCloseBtn = document.getElementById('adCloseBtn');
      const adCloseModal = document.getElementById('adCloseModal');
      const btnAdOption1 = document.getElementById('btnAdOption1');
      const btnAdOption2 = document.getElementById('btnAdOption2');
      const btnAdOption3 = document.getElementById('btnAdOption3');
      // å¼¹çª—å…ƒç´ 
      const overlay = document.getElementById('overlay');
      const scorePopup = document.getElementById('scorePopup');
      const scorePopupIcon = document.getElementById('scorePopupIcon');
      const scorePopupTitle = document.getElementById('scorePopupTitle');
      const scorePopupDesc = document.getElementById('scorePopupDesc');
      const scorePopupBtn = document.getElementById('scorePopupBtn');
      const achievementPopup = document.getElementById('achievementPopup');
      const achievementName = document.getElementById('achievementName');
      const achievementDesc = document.getElementById('achievementDesc');
      const achievementMsg = document.getElementById('achievementMsg');
      const achievementPopupBtn = document.getElementById('achievementPopupBtn');
      // ç»“æŸæ¸¸æˆç›¸å…³å¼¹çª—
      const endGameConfirmPopup = document.getElementById('endGameConfirmPopup');
      const btnConfirmEnd = document.getElementById('btnConfirmEnd');
      const btnCancelEnd = document.getElementById('btnCancelEnd');
      const endGameStatsPopup = document.getElementById('endGameStatsPopup');
      const statsScore = document.getElementById('statsScore');
      const statsRound = document.getElementById('statsRound');
      const statsCorrect = document.getElementById('statsCorrect');
      const statsWrong = document.getElementById('statsWrong');
      const statsPopupBtn = document.getElementById('statsPopupBtn');
      // é‡ç½®æˆå°±ç›¸å…³å¼¹çª—
      const resetAchieveConfirmPopup = document.getElementById('resetAchieveConfirmPopup');
      const btnConfirmReset = document.getElementById('btnConfirmReset');
      const btnYeahReset = document.getElementById('btnYeahReset');
      // æˆå°±å¢™å…ƒç´ 
      const btnAchievementWall = document.getElementById('btnAchievementWall');
      const btnResetAchieve = document.getElementById('btnResetAchieve');
      const achievementWall = document.getElementById('achievementWall');
      const achievementWallClose = document.getElementById('achievementWallClose');
      const achievementList = document.getElementById('achievementList');

      // æ¸¸æˆçŠ¶æ€ï¼ˆæ–°å¢ç»Ÿè®¡ã€è¿ç»­é€‰æ‹©è®¡æ•°ï¼‰
      let timeLeft = CONFIG.timeLimit;
      let timer = null;
      let score = 0;
      let round = 0;
      let currentQuestion = null;
      let playable = false;
      let gameActive = false;
      // ç»Ÿè®¡æ•°æ®
      let correctCount = 0;
      let wrongCount = 0;
      // è¿ç»­é€‰æ‹©è®¡æ•°ï¼ˆç”¨äºæ–°æˆå°±ï¼‰
      let consecutiveImg1Count = 0; // è¿ç»­é€‰img1.jpgæ¬¡æ•°
      let consecutiveNotImg3Count = 0; // è¿ç»­ä¸é€‰img3.jpgæ¬¡æ•°
      // æˆå°±çŠ¶æ€ï¼ˆä»æœ¬åœ°å­˜å‚¨è¯»å–ï¼Œé‡ç½®æ¸¸æˆä¸æ¶ˆå¤±ï¼‰
      let unlockedAchievements = new Set(JSON.parse(localStorage.getItem('unlockedAchievements')) || []);
      let triggeredScorePopups = new Set(); // å·²è§¦å‘çš„åˆ†æ•°å¼¹çª—é›†åˆ

      // åˆå§‹åŒ–æˆå°±å¢™ï¼ˆéšè—è·å¾—æ–¹æ³•ï¼Œä¸æ˜¾ç¤ºéšè—æˆå°±ï¼‰
      function initAchievementWall() {
        achievementList.innerHTML = '';
        Object.entries(ACHIEVEMENTS).forEach(([id, achievement]) => {
          // è·³è¿‡éšè—æˆå°±
          if (achievement.hidden) return;
          const isUnlocked = unlockedAchievements.has(id);
          const achievementItem = document.createElement('div');
          achievementItem.className = `achievement-item ${isUnlocked ? '' : 'locked'}`;
          achievementItem.innerHTML = `
            <div class="achievement-item-icon">${achievement.icon}</div>
            <div class="achievement-item-info">
              <h3 class="achievement-item-name">${achievement.name}</h3>
              <p class="achievement-item-desc">${achievement.desc}</p>
              <!-- è·å¾—æ–¹æ³•éšè— -->
              <span class="achievement-item-method">${achievement.method}</span>
            </div>
          `;
          achievementList.appendChild(achievementItem);
        });
      }

      // æ˜¾ç¤º/éšè—æˆå°±å¢™ï¼ˆä»…åˆå§‹ç•Œé¢æ˜¾ç¤ºï¼‰
      function toggleAchievementWall(show) {
        if (show) {
          achievementWall.classList.remove('hidden');
          initAchievementWall();
        } else {
          achievementWall.classList.add('hidden');
        }
      }

      // æ˜¾ç¤ºé€šç”¨å¼¹çª—
      function showPopup(popupEl) {
        overlay.classList.add('show');
        popupEl.classList.add('show');
        document.body.style.overflow = 'hidden';
      }

      // å…³é—­é€šç”¨å¼¹çª—
      function closePopup(popupEl) {
        overlay.classList.remove('show');
        popupEl.classList.remove('show');
        document.body.style.overflow = 'auto';
      }

      // æ˜¾ç¤ºåˆ†æ•°é‡Œç¨‹ç¢‘å¼¹çª—
      function showScorePopup(score) {
        if (triggeredScorePopups.has(score)) return;
        triggeredScorePopups.add(score);

        if (score === 50) {
          scorePopupIcon.textContent = 'ğŸ‰';
          scorePopupTitle.textContent = 'å¤ªæ£’äº†ï¼';
          scorePopupDesc.textContent = 'ä½ å·²ç»è·å¾—äº†50åˆ†ï¼ç¦»æ»¡åˆ†ä¸è¿œäº†ï¼';
        } else if (score === CONFIG.maxScore) {
          scorePopupIcon.textContent = 'ğŸ†';
          scorePopupTitle.textContent = 'æ»¡åˆ†ï¼';
          scorePopupDesc.textContent = 'ä½ è·å¾—äº†100åˆ†ï¼å¤©é€‰ç”·åŒéä½ è«å±ï¼';
          unlockAchievement('maxScore');
        }

        showPopup(scorePopup);
      }

      // è§£é”æˆå°±ï¼ˆå­˜å‚¨åˆ°æœ¬åœ°ï¼Œé‡ç½®æ¸¸æˆä¸æ¶ˆå¤±ï¼‰
      function unlockAchievement(achievementId) {
        if (unlockedAchievements.has(achievementId)) return;
        unlockedAchievements.add(achievementId);
        // å­˜å‚¨åˆ°æœ¬åœ°å­˜å‚¨
        localStorage.setItem('unlockedAchievements', JSON.stringify(Array.from(unlockedAchievements)));

        const achievement = ACHIEVEMENTS[achievementId];
        if (achievement) {
          achievementName.textContent = achievement.name;
          achievementDesc.textContent = achievement.desc;
          achievementMsg.textContent = achievement.msg;
          showPopup(achievementPopup);
          // æ›´æ–°æˆå°±å¢™
          initAchievementWall();
        }
      }

      // é‡ç½®æˆå°±ï¼ˆä»…æ‰‹åŠ¨é‡ç½®æ—¶è§¦å‘ï¼‰
      function resetAchievements() {
        unlockedAchievements.clear();
        localStorage.removeItem('unlockedAchievements');
        initAchievementWall();
        showMessage('æˆå°±å·²é‡ç½®', 'win');
      }

      // éšæœºæ‰“ä¹±æ•°ç»„
      function shuffleArr(arr) {
        const newArr = [...arr];
        const indexes = Array.from(arr.keys());
        for (let i = newArr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
          [indexes[i], indexes[j]] = [indexes[j], indexes[i]];
        }
        return { arr: newArr, indexes };
      }

      // æ¸²æŸ“æ¸¸æˆç½‘æ ¼
      function renderGrid() {
        gridEl.innerHTML = '';
        const { arr: shuffledImgs, indexes: originalIndexes } = shuffleArr(CONFIG.images);
        shuffledImgs.forEach((imgSrc, i) => {
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.setAttribute('data-original-idx', originalIndexes[i]);
          const img = document.createElement('img');
          img.src = imgSrc;
          img.alt = `è§’è‰²${i+1}`;
          cell.appendChild(img);
          // æ‰‹æœºç«¯è§¦æ‘¸ä¼˜å…ˆ
          cell.ontouchend = (e) => {
            e.preventDefault();
            handleCellClick(cell, imgSrc); // ä¼ å…¥å›¾ç‰‡è·¯å¾„ç”¨äºæˆå°±åˆ¤æ–­
          };
          cell.onclick = () => handleCellClick(cell, imgSrc);
          gridEl.appendChild(cell);
        });
      }

      // å¼€å§‹æ–°ä¸€è½®
      function startRound() {
        if (timer) clearInterval(timer);
        timeLeft = CONFIG.timeLimit;
        timerEl.textContent = `${timeLeft}s`;
        round++;
        roundEl.textContent = round;
        currentQuestion = QUESTIONS[Math.floor(Math.random() * QUESTIONS.length)];
        questionTextEl.textContent = currentQuestion.text;
        renderGrid();
        playable = true;
        showMessage('', '');

        timer = setInterval(() => {
          timeLeft--;
          timerEl.textContent = `${timeLeft}s`;
          if (timeLeft <= 0) {
            clearInterval(timer);
            playable = false;
            wrongCount++;
            showMessage('æ‚é±¼ æ…¢æ­»äº†', 'lose');
            // è¿ç»­é€‰æ‹©è®¡æ•°é‡ç½®
            consecutiveImg1Count = 0;
            consecutiveNotImg3Count = 0;
            setTimeout(() => gameActive && startRound(), 1000);
          }
        }, 1000);
      }

      // å¤„ç†å•å…ƒæ ¼ç‚¹å‡»ï¼ˆæ–°å¢å›¾ç‰‡åˆ¤æ–­ï¼Œç”¨äºæ–°æˆå°±ï¼‰
      function handleCellClick(cell, selectedImg) {
        if (!playable) return;
        playable = false;
        clearInterval(timer);
        const originalIdx = Number(cell.getAttribute('data-original-idx'));
        const res = currentQuestion.onSelect ? currentQuestion.onSelect(originalIdx) : null;

        // æ–°æˆå°±åˆ¤æ–­ï¼šè¿ç»­é€‰æ‹©è®¡æ•°
        if (selectedImg === 'img1.jpg') {
          consecutiveImg1Count++;
          consecutiveNotImg3Count++; // é€‰äº†img1ä¹Ÿå±äºä¸é€‰img3
        } else if (selectedImg === 'img3.jpg') {
          consecutiveImg1Count = 0;
          consecutiveNotImg3Count = 0;
        } else {
          consecutiveImg1Count = 0;
          consecutiveNotImg3Count++;
        }

        // è§£é”æ–°æˆå°±
        if (consecutiveImg1Count >= 4) {
          unlockAchievement('forceful'); // å¼ºäººæ‰€éš¾â™‚
          consecutiveImg1Count = 0; // é‡ç½®è®¡æ•°ï¼Œé¿å…é‡å¤è§¦å‘
        }
        if (consecutiveNotImg3Count >= 4) {
          unlockAchievement('forgotWho'); // å¥½åƒå¿˜äº†è°...
          consecutiveNotImg3Count = 0; // é‡ç½®è®¡æ•°ï¼Œé¿å…é‡å¤è§¦å‘
        }

        if (currentQuestion.type === 'single') {
          if (originalIdx === currentQuestion.correctIdx) {
            correctCount++;
            if (score < CONFIG.maxScore) {
              score += CONFIG.pointsPerCorrect;
              if (score > CONFIG.maxScore) score = CONFIG.maxScore;
              scoreEl.textContent = score;
              showMessage(currentQuestion.onCorrect, 'win');
              // æ£€æŸ¥åˆ†æ•°é‡Œç¨‹ç¢‘
              if (score === 50 || score === CONFIG.maxScore) {
                showScorePopup(score);
              }
              // æ£€æŸ¥æˆå°±è§£é”
              if (currentQuestion.achievement) {
                unlockAchievement(currentQuestion.achievement);
              }
            } else {
              showMessage('å·²ç»...æé™äº†â™‚â™‚â™‚', 'limit');
            }
          } else {
            wrongCount++;
            showMessage(currentQuestion.onWrong, 'lose');
            // è¿ç»­é€‰æ‹©è®¡æ•°é‡ç½®
            consecutiveImg1Count = 0;
            consecutiveNotImg3Count = 0;
          }
        } else if (res) {
          if (res.ok) {
            correctCount++;
            showMessage(res.msg, 'win');
            if (score < CONFIG.maxScore) {
              score += CONFIG.pointsPerCorrect;
              if (score > CONFIG.maxScore) score = CONFIG.maxScore;
              scoreEl.textContent = score;
              // æ£€æŸ¥åˆ†æ•°é‡Œç¨‹ç¢‘
              if (score === 50 || score === CONFIG.maxScore) {
                showScorePopup(score);
              }
            }
          } else {
            wrongCount++;
            showMessage(res.msg, 'lose');
            // è¿ç»­é€‰æ‹©è®¡æ•°é‡ç½®
            consecutiveImg1Count = 0;
            consecutiveNotImg3Count = 0;
          }
        }

        // å¼¹çª—æ˜¾ç¤ºæ—¶ä¸è‡ªåŠ¨è¿›å…¥ä¸‹ä¸€è½®
        if (!scorePopup.classList.contains('show') && !achievementPopup.classList.contains('show') && !endGameConfirmPopup.classList.contains('show')) {
          setTimeout(() => gameActive && startRound(), 1000);
        }
      }

      // æ˜¾ç¤ºæ¸¸æˆæ¶ˆæ¯
      function showMessage(text, type) {
        messageEl.textContent = text;
        messageEl.className = 'message';
        if (type === 'win') messageEl.classList.add('win');
        else if (type === 'lose') messageEl.classList.add('lose');
        else if (type === 'limit') messageEl.classList.add('limit');
      }

      // é‡ç½®æ¸¸æˆï¼ˆä¸é‡ç½®æˆå°±ï¼Œä»…é‡ç½®æ¸¸æˆæ•°æ®ï¼‰
      function resetGame() {
        if (timer) clearInterval(timer);
        // ä¸é‡ç½®æˆå°±ï¼Œä»…é‡ç½®æ¸¸æˆæ•°æ®
        score = 0;
        round = 0;
        timeLeft = CONFIG.timeLimit;
        correctCount = 0;
        wrongCount = 0;
        consecutiveImg1Count = 0;
        consecutiveNotImg3Count = 0;
        timerEl.textContent = '--';
        scoreEl.textContent = '0';
        roundEl.textContent = 'â€”';
        gridEl.innerHTML = '';
        showMessage('ç‚¹å‡»"å¼€å§‹â™‚æ¸¸æˆ"å¼€å§‹æŒ‘æˆ˜', '');
        btnEndGame.style.display = 'none'; // éšè—ç»“æŸæ¸¸æˆæŒ‰é’®
        // æ˜¾ç¤ºæˆå°±å¢™å…¥å£
        btnAchievementWall.style.display = 'inline-block';
        btnResetAchieve.style.display = 'inline-block';
        gameActive = false;
        // é‡ç½®å¼¹çª—è§¦å‘çŠ¶æ€
        triggeredScorePopups.clear();
        // å…³é—­æ‰€æœ‰å¼¹çª—
        closePopup(scorePopup);
        closePopup(achievementPopup);
        closePopup(endGameConfirmPopup);
        closePopup(endGameStatsPopup);
        closePopup(resetAchieveConfirmPopup);
        toggleAchievementWall(false);
      }

      // æ˜¾ç¤ºç»“æŸæ¸¸æˆç»Ÿè®¡
      function showEndGameStats() {
        statsScore.textContent = score;
        statsRound.textContent = round;
        statsCorrect.textContent = correctCount;
        statsWrong.textContent = wrongCount;
        showPopup(endGameStatsPopup);
      }

      // ç»“æŸæ¸¸æˆï¼ˆå¼¹å‡ºç¡®è®¤æ¡†ï¼‰
      function showEndGameConfirm() {
        showPopup(endGameConfirmPopup);
      }

      // ç¡®è®¤ç»“æŸæ¸¸æˆ
      function confirmEndGame() {
        closePopup(endGameConfirmPopup);
        showEndGameStats();
      }

      // å–æ¶ˆç»“æŸæ¸¸æˆ
      function cancelEndGame() {
        closePopup(endGameConfirmPopup);
        // ç»§ç»­æ¸¸æˆ
        if (gameActive) {
          playable = true;
          timer = setInterval(() => {
            timeLeft--;
            timerEl.textContent = `${timeLeft}s`;
            if (timeLeft <= 0) {
              clearInterval(timer);
              playable = false;
              wrongCount++;
              showMessage('æ‚é±¼ æ…¢æ­»äº†', 'lose');
              consecutiveImg1Count = 0;
              consecutiveNotImg3Count = 0;
              setTimeout(() => gameActive && startRound(), 1000);
            }
          }, 1000);
        }
      }

      // æ˜¾ç¤ºç»“æŸæ¸¸æˆç»Ÿè®¡
      function showEndGameStats() {
        statsScore.textContent = score;
        statsRound.textContent = round;
        statsCorrect.textContent = correctCount;
        statsWrong.textContent = wrongCount;
        showPopup(endGameStatsPopup);
      }

      // ç»“æŸæ¸¸æˆï¼ˆå¼¹å‡ºç¡®è®¤æ¡†ï¼‰
      function showEndGameConfirm() {
        showPopup(endGameConfirmPopup);
      }

      // ç¡®è®¤ç»“æŸæ¸¸æˆ
      function confirmEndGame() {
        closePopup(endGameConfirmPopup);
        showEndGameStats();
      }

      // æ˜¾ç¤ºé‡ç½®æˆå°±ç¡®è®¤æ¡†
      function showResetAchieveConfirm() {
        showPopup(resetAchieveConfirmPopup);
      }

      // ç¡®è®¤é‡ç½®æˆå°±ï¼ˆé€‰"æ˜¯"ï¼‰
      function confirmResetAchieve() {
        closePopup(resetAchieveConfirmPopup);
        resetAchievements();
      }

      // é‡ç½®æˆå°±é€‰"yeahâ™‚"ï¼ˆè§£é”éšè—æˆå°±ï¼‰
      function yeahResetAchieve() {
        closePopup(resetAchieveConfirmPopup);
        unlockAchievement('omg'); // è§£é”éšè—æˆå°±OMGâ™‚
        showMessage('ä½ å‘ç°äº†ä»€ä¹ˆï¼Ÿ', 'win');
      }

      // å¹¿å‘Šç›¸å…³é€»è¾‘
      function openAd() {
        const newTab = window.open(CONFIG.adLink, '_blank');
        !newTab && showMessage('è¯·å…è®¸å¼¹å‡ºçª—å£æŸ¥çœ‹å¹¿å‘Š', 'lose');
        adCloseModal.classList.remove('show');
      }

      function closeAdWithInsult() {
        showMessage('æ”¾ä½ çš„å±ã€‚', 'lose');
        adCloseModal.classList.remove('show');
        document.querySelector('footer.ad').style.display = 'none';
      }

      function closeAdWithTaunt() {
        showMessage('ä½ ç…å•¥ï¼Ÿ', 'lose');
        adCloseModal.classList.remove('show');
        document.querySelector('footer.ad').style.display = 'none';
      }

      // äº‹ä»¶ç»‘å®š
      // å¼€å§‹æ¸¸æˆ
      btnStart.ontouchend = (e) => {
        e.preventDefault();
        gameActive = true;
        btnEndGame.style.display = 'inline-block'; // æ˜¾ç¤ºç»“æŸæ¸¸æˆæŒ‰é’®
        // éšè—æˆå°±å¢™å…¥å£
        btnAchievementWall.style.display = 'none';
        btnResetAchieve.style.display = 'none';
        startRound();
      };
      btnStart.onclick = () => {
        gameActive = true;
        btnEndGame.style.display = 'inline-block';
        btnAchievementWall.style.display = 'none';
        btnResetAchieve.style.display = 'none';
        startRound();
      };

      // é‡ç½®æ¸¸æˆ
      btnRestart.ontouchend = (e) => {
        e.preventDefault();
        resetGame();
      };
      btnRestart.onclick = resetGame;

      // ç»“æŸæ¸¸æˆï¼ˆå¼¹å‡ºç¡®è®¤æ¡†ï¼‰
      btnEndGame.ontouchend = (e) => {
        e.preventDefault();
        showEndGameConfirm();
      };
      btnEndGame.onclick = showEndGameConfirm;

      // ç¡®è®¤ç»“æŸæ¸¸æˆ
      btnConfirmEnd.ontouchend = (e) => {
        e.preventDefault();
        confirmEndGame();
      };
      btnConfirmEnd.onclick = confirmEndGame;

      // å–æ¶ˆç»“æŸæ¸¸æˆ
      btnCancelEnd.ontouchend = (e) => {
        e.preventDefault();
        cancelEndGame();
      };
      btnCancelEnd.onclick = cancelEndGame;

      // ç»“æŸæ¸¸æˆç»Ÿè®¡å¼¹çª—è¿”å›ä¸»é¡µ
      statsPopupBtn.ontouchend = (e) => {
        e.preventDefault();
        closePopup(endGameStatsPopup);
        resetGame();
      };
      statsPopupBtn.onclick = () => {
        closePopup(endGameStatsPopup);
        resetGame();
      };

      // é‡ç½®æˆå°±ï¼ˆå¼¹å‡ºç¡®è®¤æ¡†ï¼‰
      btnResetAchieve.ontouchend = (e) => {
        e.preventDefault();
        showResetAchieveConfirm();
      };
      btnResetAchieve.onclick = showResetAchieveConfirm;

      // ç¡®è®¤é‡ç½®æˆå°±ï¼ˆé€‰"æ˜¯"ï¼‰
      btnConfirmReset.ontouchend = (e) => {
        e.preventDefault();
        confirmResetAchieve();
      };
      btnConfirmReset.onclick = confirmResetAchieve;

      // é‡ç½®æˆå°±é€‰"yeahâ™‚"
      btnYeahReset.ontouchend = (e) => {
        e.preventDefault();
        yeahResetAchieve();
      };
      btnYeahReset.onclick = yeahResetAchieve;

      // å¹¿å‘Šå…³é—­
      adCloseBtn.ontouchend = (e) => {
        e.preventDefault();
        adCloseModal.classList.add('show');
      };
      adCloseBtn.onclick = () => adCloseModal.classList.add('show');

      // æ¨¡æ€æ¡†é€‰é¡¹
      btnAdOption1.ontouchend = (e) => {
        e.preventDefault();
        openAd();
      };
      btnAdOption1.onclick = openAd;

      btnAdOption2.ontouchend = (e) => {
        e.preventDefault();
        closeAdWithInsult();
      };
      btnAdOption2.onclick = closeAdWithInsult;

      btnAdOption3.ontouchend = (e) => {
        e.preventDefault();
        closeAdWithTaunt();
      };
      btnAdOption3.onclick = closeAdWithTaunt;

      // å¼¹çª—æŒ‰é’®
      scorePopupBtn.ontouchend = (e) => {
        e.preventDefault();
        closePopup(scorePopup);
        if (gameActive) {
          setTimeout(() => startRound(), 300);
        }
      };
      scorePopupBtn.onclick = () => {
        closePopup(scorePopup);
        if (gameActive) {
          setTimeout(() => startRound(), 300);
        }
      };

      achievementPopupBtn.ontouchend = (e) => {
        e.preventDefault();
        closePopup(achievementPopup);
        if (gameActive) {
          setTimeout(() => startRound(), 300);
        }
      };
      achievementPopupBtn.onclick = () => {
        closePopup(achievementPopup);
        if (gameActive) {
          setTimeout(() => startRound(), 300);
        }
      };

      // æˆå°±å¢™ç›¸å…³
      btnAchievementWall.ontouchend = (e) => {
        e.preventDefault();
        toggleAchievementWall(true);
      };
      btnAchievementWall.onclick = () => toggleAchievementWall(true);

      achievementWallClose.ontouchend = (e) => {
        e.preventDefault();
        toggleAchievementWall(false);
      };
      achievementWallClose.onclick = () => toggleAchievementWall(false);

      // æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
      adCloseModal.ontouchend = (e) => {
        if (e.target === adCloseModal) adCloseModal.classList.remove('show');
      };
      adCloseModal.onclick = (e) => {
        if (e.target === adCloseModal) adCloseModal.classList.remove('show');
      };

      // åˆå§‹åŒ–
      resetGame();
      initAchievementWall();
    };
  </script>
</body>
</html>